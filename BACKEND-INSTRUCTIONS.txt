# üöÄ BACKEND SETUP INSTRUCTIONS

Congratulations! Your e-commerce website now has a complete backend system!

## What You Now Have

‚úÖ **Node.js Backend Server** - Handles all business logic
‚úÖ **SQLite Database** - Stores products, reviews, orders
‚úÖ **REST API** - Connects frontend to backend
‚úÖ **Automatic Stock Management** - Updates when orders placed
‚úÖ **Review System** - Customers can leave reviews
‚úÖ **Order Processing** - Complete checkout system

---

## INSTALLATION (One-Time Setup)

### Step 1: Install Node.js
1. Go to https://nodejs.org/
2. Download and install the LTS version
3. Verify installation - Open command prompt and type:
   ```
   node --version
   npm --version
   ```
   (You should see version numbers)

### Step 2: Install Dependencies
1. Open command prompt/terminal
2. Navigate to your website folder:
   ```
   cd path/to/your/website
   ```
3. Install required packages:
   ```
   npm install
   ```
   (This reads package.json and installs express, cors, sqlite3)

### Step 3: Import Your Products
1. Make sure your products.json file is in the same folder
2. Start the backend server:
   ```
   npm start
   ```
3. Open a NEW command prompt window
4. Run the import script:
   ```
   node setup-import-products.js
   ```
5. You should see "‚úì Products imported successfully!"

---

## RUNNING THE WEBSITE

### Every Time You Want to Use Your Website:

1. **Start the Backend Server:**
   ```
   npm start
   ```
   You'll see:
   ```
   üöÄ ShopHub Backend Server Running!
   üìç Server: http://localhost:3000
   ‚úì Database connected
   ```

2. **Open Your Website:**
   - If using Python server for frontend:
     ```
     python -m http.server 8080
     ```
     Then go to: http://localhost:8080

   - OR just open index.html in browser
     (Make sure to update the script src to script-backend.js)

3. **Both Must Be Running Together:**
   - Backend on port 3000
   - Frontend on port 8080 (or just open HTML file)

---

## FILE STRUCTURE

```
your-website/
‚îÇ
‚îú‚îÄ‚îÄ index.html              (Homepage)
‚îú‚îÄ‚îÄ products.html           (Products page)
‚îú‚îÄ‚îÄ styles.css              (Styling)
‚îú‚îÄ‚îÄ script-backend.js       (NEW - Frontend that talks to backend)
‚îú‚îÄ‚îÄ products.json           (Original product data)
‚îÇ
‚îú‚îÄ‚îÄ server.js               (NEW - Backend server)
‚îú‚îÄ‚îÄ package.json            (NEW - Node.js configuration)
‚îú‚îÄ‚îÄ ecommerce.db            (NEW - Database - created automatically)
‚îú‚îÄ‚îÄ setup-import-products.js (NEW - Import script)
‚îÇ
‚îî‚îÄ‚îÄ BACKEND-INSTRUCTIONS.txt (This file)
```

---

## UPDATE YOUR HTML FILES

In your index.html and products.html, change the script tag from:
```html
<script src="script.js"></script>
```

To:
```html
<script src="script-backend.js"></script>
```

---

## API ENDPOINTS (What Your Backend Can Do)

### Products
- GET `/api/products` - Get all products
- GET `/api/products/:id` - Get single product
- PUT `/api/products/:id/stock` - Update stock (automatic)

### Reviews
- GET `/api/products/:id/reviews` - Get product reviews
- POST `/api/products/:id/reviews` - Add new review
  Body: { "customer_name": "John", "rating": 5, "comment": "Great!" }

### Orders
- POST `/api/orders` - Create new order
  Body: {
    "customer_name": "John Doe",
    "customer_email": "john@example.com",
    "customer_phone": "555-1234",
    "customer_address": "123 Main St",
    "items": [
      {
        "product_id": 1,
        "product_name": "Headphones",
        "quantity": 1,
        "price": 149.99
      }
    ],
    "payment_method": "credit_card"
  }

- GET `/api/orders/:id` - Get order details
- GET `/api/orders` - Get all orders (admin)

---

## TESTING THE SYSTEM

### Test 1: Products Load
1. Start backend: `npm start`
2. Open browser: http://localhost:3000/api/products
3. You should see JSON data with all your products

### Test 2: Add Review
Use a tool like Postman or this curl command:
```bash
curl -X POST http://localhost:3000/api/products/1/reviews \
  -H "Content-Type: application/json" \
  -d '{"customer_name":"John","rating":5,"comment":"Amazing product!"}'
```

### Test 3: Create Order
```bash
curl -X POST http://localhost:3000/api/orders \
  -H "Content-Type: application/json" \
  -d '{
    "customer_name":"John Doe",
    "customer_email":"john@example.com",
    "items":[{"product_id":1,"product_name":"Headphones","quantity":1,"price":149.99}],
    "payment_method":"cash_on_delivery"
  }'
```

---

## HOW IT WORKS

### When Customer Buys a Product:

1. Customer adds item to cart (stored in browser)
2. Customer clicks "Checkout"
3. Frontend sends order to: POST /api/orders
4. Backend receives order
5. Backend saves order to database
6. Backend automatically reduces stock:
   - Had 10 headphones ‚Üí Now has 9
7. Backend updates product.inStock if stockCount reaches 0
8. Backend sends confirmation back to frontend
9. Customer sees "Order Successful!"

### When Customer Leaves Review:

1. Customer writes review and clicks Submit
2. Frontend sends to: POST /api/products/1/reviews
3. Backend saves review to database
4. Backend calculates new average rating
5. Backend updates product rating
6. Next visitor sees updated rating and new review!

---

## COMMON ISSUES & SOLUTIONS

### "Unable to connect to server"
‚Üí Make sure backend is running: `npm start`

### "Port 3000 already in use"
‚Üí Stop other server or change PORT in server.js

### "Cannot find module"
‚Üí Run: `npm install`

### Products not showing
‚Üí Run: `node setup-import-products.js`

### Database locked
‚Üí Close all connections and restart: `npm start`

---

## NEXT STEPS

Now that you have a backend, you can:

1. **Add Checkout Page**
   - I can create a checkout.html with order form
   - Integrates with /api/orders endpoint

2. **Add Review Forms**
   - I can add review forms to product pages
   - Customers can submit reviews directly

3. **Add Admin Dashboard**
   - View all orders
   - Manage products
   - Update stock manually

4. **Integrate Payment Gateway**
   - Add Stripe or bank payment
   - Process real payments
   - Update order status

5. **Deploy to Real Server**
   - Heroku, DigitalOcean, or AWS
   - Make it accessible online
   - Get a domain name

---

## MANAGING YOUR DATA

### View Database Contents
You can use a SQLite viewer like:
- DB Browser for SQLite (free download)
- Open ecommerce.db file
- See all products, orders, reviews

### Backup Database
Simply copy the `ecommerce.db` file to backup!

### Reset Database
Delete `ecommerce.db` file and run:
```
npm start
node setup-import-products.js
```

---

## SUPPORT

If you need help:
1. Check that backend is running (npm start)
2. Check browser console for errors (F12)
3. Check terminal for backend errors
4. Make sure both frontend and backend are running

---

**Congratulations! Your e-commerce website is now a full-stack application! üéâ**

You went from a simple static website to a complete system with:
- Database storage
- Real-time stock management  
- Customer reviews
- Order processing
- RESTful API

This is professional-grade e-commerce infrastructure!
